CREATE SCHEMA EC1_SI1N;

CREATE TABLE IF NOT EXISTS GRUPOS(
ID_GRUPO INT PRIMARY KEY,
NOME_GRUPO VARCHAR (100) NOT NULL,
DESCRICAO TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS USUARIOS(
ID_USUARIO INT PRIMARY KEY,
NOME_USUARIO VARCHAR (100) NOT NULL,
SOBRENOME VARCHAR (100) NOT NULL,
EMAIL VARCHAR (30) NOT NULL
);

CREATE TABLE IF NOT EXISTS POSTAGENS(
ID_POSTS INT PRIMARY KEY,
TEXTO TEXT, 
IMAGEM BLOB,
DATA_HORA DATETIME NOT NULL,
USUARIO INT NOT NULL,
CONSTRAINT FK_USUARIOS FOREIGN KEY (USUARIO) REFERENCES  USUARIOS (ID_USUARIO)
);


CREATE TABLE IF NOT EXISTS COMENTARIOS(
ID_COMENTARIOS INT PRIMARY KEY,
TEXTO TEXT NOT NULL,
DATAHORA DATETIME NOT NULL,
USUARIO INT NOT NULL,
POST INT NOT NULL,
CONSTRAINT FK_USUARIOS FOREIGN KEY (USUARIO) REFERENCES  USUARIOS (ID_USUARIO)
CONSTRAINT FK_POSTAGENS FOREIGN KEY (POST) REFERENCES  POSTAGENS (ID_POSTS)
);


#criando tabela usuarios_GRUPOS
CREATE TABLE IF NOT EXISTS PARTICIPANTE_EVENTO(
INSCRICAO INT,
CPF VARCHAR (20),
EVENTO INT,
PRIMARY KEY (NUM_INSCRICAO,CPF,ID_ATIVIDADE),
CONSTRAINT FK_PARTICIPANTES FOREIGN KEY (INSCRICAO, CPF) REFERENCES  PARTICIPANTES (ID_INSCRICAO, CPF),
CONSTRAINT FK_EVENTOS FOREIGN KEY (EVENTO) REFERENCES  EVENTOS (ID_EVENTO)
);

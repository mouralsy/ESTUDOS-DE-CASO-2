CREATE SCHEMA EXERCICIO2_DDL;
USE EXERCICIO2_DDL;

CREATE TABLE IF NOT EXISTS GRUPOS(
ID_GRUPO INT PRIMARY KEY,
NOME_GRUPO VARCHAR (100) NOT NULL,
DESCRICAO TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS USUARIOS(
ID_USUARIO INT PRIMARY KEY,
NOME_USUARIO VARCHAR (100) NOT NULL,
SOBRENOME_USUARIO VARCHAR (100) NOT NULL,
EMAIL_USUARIO VARCHAR (30) NOT NULL
);

CREATE TABLE IF NOT EXISTS POSTAGENS(
ID_POST INT PRIMARY KEY,
TEXTO_POST TEXT, 
IMAGEM_POST BLOB,
DATA_HORA_POST DATETIME NOT NULL,
USUARIO_POST INT NOT NULL,
CONSTRAINT FK_USUARIO_POST FOREIGN KEY (USUARIO_POST) REFERENCES  USUARIOS (ID_USUARIO)
);


CREATE TABLE IF NOT EXISTS COMENTARIOS(
ID_COMENTARIOS INT PRIMARY KEY,
TEXTO_COMENTARIOS TEXT NOT NULL,
DATAHORA_COMENTARIOS DATETIME NOT NULL,
USUARIO_COMENTARIOS INT NOT NULL,
POST_COMENTARIOS INT NOT NULL,
CONSTRAINT FK_USUARIO_COMENTARIOS FOREIGN KEY (USUARIO_COMENTARIOS) REFERENCES  USUARIOS (ID_USUARIO),
CONSTRAINT FK_POSTAGENS_COMENTARIOS FOREIGN KEY (POST_COMENTARIOS) REFERENCES  POSTAGENS (ID_POSTS)
);

#criando tabela usuarios_GRUPOS
CREATE TABLE IF NOT EXISTS USUARIOS_GRUPOS(
US_USUARIO INT,
US_GRUPO INT,
PRIMARY KEY (US_USUARIO, US_GRUPO),
CONSTRAINT FK_US_USUARIO FOREIGN KEY (US_USUARIO) REFERENCES  USUARIOS (ID_USUARIO),
CONSTRAINT FK_US_GRUPO FOREIGN KEY (US_GRUPO) REFERENCES  GRUPOS (ID_GRUPO)
);

#criando tabela usuarios_GRUPOS
CREATE TABLE IF NOT EXISTS SEGUIDORES_USUARIOS(
US_USUARIO INT,
US_SEGUIDOR INT,
PRIMARY KEY (US_USUARIO, US_SEGUIDOR),
CONSTRAINT FK_US_USUARIO FOREIGN KEY (US_USUARIO) REFERENCES  USUARIOS (ID_USUARIO),
CONSTRAINT FK_US_SEGUIDOR FOREIGN KEY (US_SEGUIDOR) REFERENCES  USUARIOS (ID_USUARIO)
);

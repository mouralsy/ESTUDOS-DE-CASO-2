CREATE SCHEMA EXERCICIO1_DDL;
USE EXERCICIO1_DDL;

#criado tabela participantes
CREATE TABLE IF NOT EXISTS PARTICIPANTES(
NUM_INSCRICAO INT PRIMARY KEY NOT NULL,
CPF VARCHAR (50) NOT NULL,
PRIMARY KEY (NUM_INSCRICAO, CPF),
NOME VARCHAR (100) NOT NULL,
DATA_NASC DATE NOT NULL,
EMPRESA VARCHAR (100)
);

ALTER TABLE PARTICIPANTES ADD EMAIL VARCHAR(30);
ALTER TABLE PARTICIPANTES DROP COLUMN EMAIL;

#criado tabela locais
CREATE TABLE IF NOT EXISTS LOCAIS(
ID_LOCAL INT PRIMARY KEY,
NOME VARCHAR (100) NOT NULL,
LOG_LOCAL VARCHAR (100) NOT NULL,
NUM_LOG_LOCAL INT,
BAIRRO_LOCAL VARCHAR (100) NOT NULL,
CIDADE VARCHAR (100) NOT NULL,
UF CHAR (2) NOT NULL,
CEP VARCHAR (20) NOT NULL,
CIDADE INT NOT NULL
);

#criado tabela eventos
CREATE TABLE IF NOT EXISTS EVENTOS(
ID_EVENTOS INT PRIMARY KEY,
NOME_EVENTO VARCHAR (100) NOT NULL,
DATA_EVENTO DATE NOT NULL,
ENTIDADE_EVENTO VARCHAR (100) NOT NULL,
LOCAL_EVENTO INT,
#criando a referencia para a chave estrangeira
CONSTRAINT FK_LOCAL_EVENTO FOREIGN KEY (LOCAL_EVENTO) REFERENCES  LOCAIS (ID_LOCAL)
);

#criado tabela atividades
CREATE TABLE IF NOT EXISTS ATIVIDADES(
ID_ATIVIDADES INT PRIMARY KEY,
NOME_ATC VARCHAR (100) NOT NULL,
DATA_ATV DATE NOT NULL,
HORA_ATV TIME NOT NULL,
EVENTO_ATV INT NOT NULL,
CONSTRAINT FK_EVENTO_ATV FOREIGN KEY (EVENTO_ATV) REFERENCES  EVENTOS (ID_EVENTOS)
);

#criando tabela participante_atividade
CREATE TABLE IF NOT EXISTS PARTICIPANTE_ATIVIDADE(
INSCRICAO INT,
CPF VARCHAR (20),
ATIVIDADE INT,
PRIMARY KEY (NUM_INSCRICAO,CPF,ID_ATIVIDADE),
CONSTRAINT FK_PARTICIPANTES FOREIGN KEY (INSCRICAO, CPF) REFERENCES  PARTICIPANTES (ID_INSCRICAO, CPF),
CONSTRAINT FK_ATIVIDADES FOREIGN KEY (ATIVIDADE) REFERENCES  ATIVIDADES (ID_ATIVIDADES)
);


#criando tabela participante_evento
CREATE TABLE IF NOT EXISTS PARTICIPANTE_EVENTO(
INSCRICAO INT,
CPF VARCHAR (20),
EVENTO INT,
PRIMARY KEY (NUM_INSCRICAO,CPF,ID_ATIVIDADE),
CONSTRAINT FK_PARTICIPANTES FOREIGN KEY (INSCRICAO, CPF) REFERENCES  PARTICIPANTES (ID_INSCRICAO, CPF),
CONSTRAINT FK_EVENTOS FOREIGN KEY (EVENTO) REFERENCES  EVENTOS (ID_EVENTO)
);


CREATE SCHEMA EXERCICIO3_DDL;
USE EXERCICIO3_DDL;

CREATE TABLE IF NOT EXISTS ESPECTADORES(
ID_ESPEC INT PRIMARY KEY,
TEL_ESPEC VARCHAR (20),
EMAIL_ESPEC VARCHAR (50) NOT NULL,
NOME_ESPEC VARCHAR (100) NOT NULL,
DATA_NASC DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS SALAS(
ID_SALA INT PRIMARY KEY,
NOME_SALA VARCHAR (50) NOT NULL,
CAPACIDADE_SALA INT NOT NULL
);

CREATE TABLE IF NOT EXISTS FILMES(
ID_FILME INT PRIMARY KEY,
NOME_FILME VARCHAR (100) NOT NULL,
DISTRIBUIDOR_FILME VARCHAR (100) NOT NULL,
TEMPO_FILME INT NOT NULL,
DIRETOR_FILME VARCHAR (100) NOT NULL
);

#criando tabela SESSOES
CREATE TABLE IF NOT EXISTS SESSOES(
ID_SESSAO INT PRIMARY KEY,
FILME_SESSAO INT NOT NULL,
SALA_SESSAO INT NOT NULL,
CONSTRAINT FK_SESSOES_FILME FOREIGN KEY (FILME_SESSAO) REFERENCES  FILMES (ID_FILME),
CONSTRAINT FK_SESSOES_SALA FOREIGN KEY (SALA_SESSAO) REFERENCES  SALAS (ID_SALA)
);


#criando tabela INGRESSOS
CREATE TABLE IF NOT EXISTS INGRESSOS(
ID_INGRESSOS INT NOT NULL,
DATA_INGRESSOS DATE NOT NULL,
HORA_INGRESSOS TIME NOT NULL,
SESSAO_INGRESSOS INT NOT NULL,
ESPECTATOR_INGRESSOS INT NOT NULL,
PRIMARY KEY (ID_INGRESSOS, SESSAO_INGRESSOS, ESPECTATOR_INGRESSOS ),
CONSTRAINT FK_SESSAO_INGRESSOS FOREIGN KEY (SESSAO_INGRESSOS) REFERENCES  SESSOES (ID_SESSAO),
CONSTRAINT FK_ESPECTATOR_INGRESSOS FOREIGN KEY (ESPECTATOR_INGRESSOS) REFERENCES  ESPECTADORES (ID_ESPEC)
);
